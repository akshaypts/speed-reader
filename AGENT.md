# Project: Speed Reader App

## Overview
A web-based speed reading application designed to help users read faster using the RSVP (Rapid Serial Visual Presentation) method. The app highlights the optimal recognition point (ORP) of each word in red to minimize eye movement.

## Tech Stack
-   **Runtime/Package Manager**: Bun
-   **Framework**: React (Vite)
-   **Routing**: TanStack Router (File-based routing)
-   **Styling**: Tailwind CSS (v3 for compatibility)
-   **UI Components**: Shadcn UI (Radix UI primitives + Tailwind)
-   **Language**: TypeScript

## Architecture & Patterns

### 1. File Structure
-   `src/routes/`: Contains application pages and the root layout (`__root.tsx`). Uses TanStack Router's file-based routing system.
-   `src/components/ui/`: Reusable, atomic UI components (Button, Slider, Card) generated by Shadcn.
-   `src/components/`: Feature-specific components (`ReaderDisplay`, `Controls`, `InputArea`).
-   `src/lib/`: Utility functions (`reader-utils.ts` for logic, `utils.ts` for styling).

### 2. Core Logic (Pivot/ORP)
-   The "Optical Center" or Pivot of a word is calculated in `getPivotIndex`.
-   Logic balances the visual weight to keep the eye centered.
-   **Pattern**: Longer words need a pivot slightly to the left of the mathematical center.

### 3. State Management
-   Local component state (`useState`) in `index.tsx` is sufficient for this scope.
-   **Timer Loop**: Uses `setInterval` in a `useEffect` hook to drive the word rendering based on WPM.

### 4. Styling
-   **Dark Mode**: Enforced by adding `dark` class to `html` element on mount in `__root.tsx`.
-   **Responsive Design**: Typography scales using media queries (e.g., `text-2xl sm:text-4xl`) to prevent overflow on mobile devices.

## Learnings & Constraints

### Mobile Responsiveness
-   **Issue**: Long words (e.g., "self-supervised") were overflowing the viewport on small screens (iPhone XR).
-   **Fix**: Implemented responsive font sizes (`text-3xl sm:text-6xl`) in `ReaderDisplay.tsx` to significantly reduce text size on mobile while maintaining readability on desktop.

### Text Sanitization
-   **Issue**: Copied text often contains citation markers (e.g., `[1]`, `[12]`) which disrupt reading flow.
-   **Fix**: Added regex sanitization `text.replace(/\[\d+\]/g, '')` in `splitTextIntoWords` utility.

### Tooling
-   **Bun**: Used for fast package installation and running scripts.
-   **Tailwind v4 vs v3**: Downgraded to Tailwind v3 to ensure stability and compatibility with standard Shadcn CLI tools.
